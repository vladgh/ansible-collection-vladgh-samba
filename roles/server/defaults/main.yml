---
samba_role: 'fileserver'
# samba_role: 'dc_primary'
# samba_role: 'dc_secondary'

samba_workgroup: 'WORKGROUP'
samba_server_string: 'Fileserver %m'
samba_log_size: 5000
samba_log_level: 0
samba_interfaces: []
samba_security: 'user'
samba_passdb_backend: 'tdbsam'
samba_map_to_guest: 'Never'
samba_load_printers: false
samba_printer_type: 'cups'
samba_cups_server: 'localhost:631'
samba_load_homes: false
samba_create_varwww_symlinks: false
samba_shares_root: '/srv/shares'
samba_manage_directories: true
samba_shares: []
samba_users: []
# samba_server_min_protocol: SMB3
# samba_smb_encrypt: mandatory
# Turn off NTLMv1
# samba_ntlm_auth: mschapv2-and-ntlmv2-only
# Turning off null session connections
# samba_restrict_anonymous: 2

samba_enable_netbios: true
samba_wins_support: true
samba_local_master: true
samba_domain_master: true
samba_preferred_master: true
samba_mitigate_cve_2017_7494: true

# Domain Controller role
# samba_workgroup: 'REALM'
samba_realm: REALM.INTERNAL
samba_dns_servers: 192.168.1.1
samba_dns_forwarder: 1.1.1.1
samba_dc_fqdn: dc1.realm.internal
# DC admin user: Administrator
# if undefined, a random password will be generated
# samba_dc_admin_password: ''
samba_dc_shares_audit: true
samba_domain_provision_extra_args: ''
samba_gpo_enable: true
samba_gpo_admx_url: https://download.microsoft.com/download/9/5/b/95be347e-c49e-4ede-a205-467c85eb1674/Administrative%20Templates%20(.admx)%20for%20Windows%2011%20Sep%202024%20Update.msi  # noqa yaml[line-length]
samba_gpo_admx_dir: 'Program Files/Microsoft Group Policy/Windows 11 Sep 2024 Update (24H2)'
samba_dc_users:
  - { login: user1 }
  - { login: user2 }
samba_custom_conf:
  - { s: global,
      o: 'netbios name',
      v: 'Domain Controller'
  }
  - { s: global,
      o: 'server string',
      v: 'Domain Controller'
  }

# https://wiki.samba.org/index.php/Samba_AD_DC_Port_Usage
samba_ufw: false
samba_ufw_if: eth0
## only affect incoming traffic
# samba_ufw_default_policy: allow
samba_ufw_default_policy: deny
samba_ufw_default_logging: medium
# trusted sources for all ports
samba_ufw_access:
  - 10.0.0.0/8
  - 172.16.0.0/12
  - 192.168.0.0/16
samba_ufw_access_with_log: []
# opened ports for all sources
samba_ufw_allow_ports_in:
  - '53'
  - '88'
  - '445'
  - '636'
  - '3269'
  - '49152-65535'
samba_ufw_out_logging: false
samba_ufw_allow_ports_out:
  - '53'
  - '123'
  ## email/TLS?
  ## web (some apt updates are on http)
  - '80'
  - '443'
# web proxy? must also be configured in /etc/environment
samba_proxy_ip:
samba_proxy_port:

samba_ufw_allow_if_out: []
