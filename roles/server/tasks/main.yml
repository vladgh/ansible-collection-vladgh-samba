---
- name: Include OS specific variables
  ansible.builtin.include_vars: "{{ lookup('ansible.builtin.first_found', params) }}"
  vars:
    params:
      files:
        - 'os_{{ ansible_distribution }}.yml'
        - 'os_{{ ansible_os_family }}.yml'
      paths:
        - 'vars'

- name: Install Samba packages
  ansible.builtin.package:
    name: "{{ samba_packages }}"
    state: present
  when: samba_packages is defined and samba_packages | length > 0
  tags: samba

- name: Import fileserver
  ansible.builtin.import_tasks: fileserver.yml
  when:
    - samba_role == 'fileserver'

- name: Import dc_primary
  ansible.builtin.import_tasks: dc_primary.yml
  when:
    - samba_role == 'dc_primary'

- name: Import Logs workaround
  ansible.builtin.import_tasks: logs-workaround.yml
